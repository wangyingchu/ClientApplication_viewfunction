<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
	Licensed Materials - Property of IBM
	(C) Copyright IBM Corp. 2010, 2012 All Rights Reserved
	US Government Users Restricted Rights - Use, duplication or
	disclosure restricted by GSA ADP Schedule Contract with IBM Corp.
-->
<html>
<head>
	<title>MenuTabController demo</title>
	
	<script type="text/javascript" src="../../tests/dojoVersion.js"></script>

	<script type="text/javascript">
		dojoCSSImport("../../../../@dojopath@/dojo/resources/dojo.css", "idxStyles");
		dojoCSSImport("../../../../@dojopath@/dijit/themes/dijit.css", "idxStyles");
		dojoCSSImport("../../../../@dojopath@/dijit/themes/dijit_rtl.css", "idxStyles");
	</script>
	
    <style id="idxStyles" type="text/css">
        @import "../../tests/test.css";
    </style>

	<script type="text/javascript">
		var dojoConfig = currentDojoVersion.dojoConfig;
		dojoScriptImport("../../../../@dojopath@/dojo/dojo.js", "postDojo");
	</script>
	
	<script type="text/javascript" id="postDojo">
		var modules = [
			"dijit.layout.TabContainer",
			"idx.widget.Menu",
			"dijit.MenuItem",
			"dijit.form.ToggleButton",
			"idx.layout.MenuTabController",
			"dijit.layout.ContentPane"];
			
		dojoRequireModules(modules, null, currentDojoVersion.async);

		require(["idx/layout/MenuTabController","dojo/ready", "dojo/on", "dojo/_base/lang","dijit/registry",], function(MenuTabController, ready, on,lang,registry){
			ready(function(){
				var menuController = registry.byId("menu_tab_controller");

				var kids = menuController.getChildren();

				for (var i=0, len=kids.length; i < len; i++) {
					var tab = kids[i];

					if(tab.id in menuController.tablist._handles){
						var handles=menuController.tablist._handles[tab.id];
						handles.forEach(function(handle){
							handle.remove();
					});

					on(tab.controlButton.titleNode, "click", function(id){
						return function() {
							registry.byId("menu_tab_controller").tablist.showPagePopup(id);
					}}(tab.id));
				}
				}
			});
		});


	
	</script>	
	<script type="text/javascript" src="../../tests/commonTest.js"></script>
</head>
<body class="oneui" style="width: 100%; height: 100%; margin: 0; padding: 0;">
	<a class="dijitOffScreen" href="#maincontent">Skip to main content</a>
	<script type="text/javascript">applyThemeToBody("oneui");</script><!-- only oneui theme is supported -->
	<a name="maincontent"></a>
	
	<div class="testMain">

		<div data-dojo-type="idx.widget.Menu" id="thirdtabmenu" style="display: none;" data-dojo-id="thirdtabmenu">
			<div data-dojo-type="dijit.MenuItem" onClick="alert('third tab menu item 1 clicked')">Item 1A</div>
			<div data-dojo-type="dijit.MenuItem" onClick="alert('third tab menu item 2 clicked')">Item 2A</div>
			<div data-dojo-type="dijit.MenuItem" onClick="alert('third tab menu item 3 clicked')">Item 3A</div>
	    </div>
	
		<div data-dojo-type="idx.widget.Menu" id="fourthtabmenu" style="display: none;" data-dojo-id="fourthtabmenu">
			<div data-dojo-type="dijit.MenuItem" onClick="alert('fourth tab menu item 1 clicked')">Item 1B</div>
			<div data-dojo-type="dijit.MenuItem" onClick="alert('fourth tab menu item 2 clicked')">Item 2B</div>
			<div data-dojo-type="dijit.MenuItem" onClick="alert('fourth tab menu item 3 clicked')">Item 3B</div>
	    </div>
		<div id="menu_tab_controller" data-dojo-type="dijit.layout.TabContainer" data-dojo-props='controllerWidget: "idx.layout.MenuTabController", style: "width: 100%; height: 10em;"'>
			<div data-dojo-type="dijit.layout.ContentPane" data-dojo-props='title: "First tab"'>
				<h1>Hello, I am the first page</h1>
				<p>This page is not closable, and does not have a popup menu associated with it.</p>
			</div>
			<div data-dojo-type="dijit.layout.ContentPane" data-dojo-props='title: "Second tab", closable: true'>
				<h1>Hello, I am the second page</h1>
				<p>This page is closable, but does not have a popup menu associated with it.</p>
			</div>
			<div data-dojo-type="dijit.layout.ContentPane" data-dojo-props='title: "Third tab", popup: "thirdtabmenu"'>
				<h1>Hello, I am the third page</h1>
				<p>This page is not closable, but does  have a popup menu associated with it.</p>
			</div>
			<div data-dojo-type="dijit.layout.ContentPane" data-dojo-props='title: "Fourth Tab", closable: true, popup: "fourthtabmenu"'>
				<h1>Hello, I am the fourth page</h1>
				<p>This page is closable, and also has a popup menu associated with it.</p>
			</div>
		</div>
	</div>
</body>
</html>